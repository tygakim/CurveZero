# new approach
# deploy all contracts but TrustedAddy goes last
# update all contracts to point to TrustedAddy

# compile all
starknet-compile Interface/LiquidityProvider.cairo --output Compiled/LiquidityProvider_compiled.json --abi Compiled/LiquidityProvider_abi.json
starknet-compile Interface/PriceProvider.cairo --output Compiled/PriceProvider_compiled.json --abi Compiled/PriceProvider_abi.json
starknet-compile Interface/CapitalBorrower.cairo --output Compiled/CapitalBorrower_compiled.json --abi Compiled/CapitalBorrower_abi.json
starknet-compile Interface/LoanLiquidator.cairo --output Compiled/LoanLiquidator_compiled.json --abi Compiled/LoanLiquidator_abi.json
starknet-compile Interface/GovenanceToken.cairo --output Compiled/GovenanceToken_compiled.json --abi Compiled/GovenanceToken_abi.json
starknet-compile Core/CZCore.cairo --output Compiled/CZCore_compiled.json --abi Compiled/CZCore_abi.json
starknet-compile Core/Controller.cairo --output Compiled/Controller_compiled.json --abi Compiled/Controller_abi.json
starknet-compile Core/InsuranceFund.cairo --output Compiled/InsuranceFund_compiled.json --abi Compiled/InsuranceFund_abi.json
starknet-compile Config/Settings.cairo --output Compiled/Settings_compiled.json --abi Compiled/Settings_abi.json
starknet-compile Testing/ERC20_base.cairo --output Compiled/ERC20_base_compiled.json --abi Compiled/ERC20_base_abi.json
starknet-compile Testing/Oracle.cairo --output Compiled/Oracle_compiled.json --abi Compiled/Oracle_abi.json
starknet-compile Config/TrustedAddy.cairo --output Compiled/TrustedAddy_compiled.json --abi Compiled/TrustedAddy_abi.json

starknet deploy --contract Compiled/LiquidityProvider_compiled.json --inputs 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
starknet deploy --contract Compiled/PriceProvider_compiled.json --inputs 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
starknet deploy --contract Compiled/CapitalBorrower_compiled.json --inputs 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
starknet deploy --contract Compiled/LoanLiquidator_compiled.json --inputs 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
starknet deploy --contract Compiled/GovenanceToken_compiled.json --inputs 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
starknet deploy --contract Compiled/CZCore_compiled.json --inputs 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
starknet deploy --contract Compiled/Controller_compiled.json --inputs 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
starknet deploy --contract Compiled/InsuranceFund_compiled.json --inputs 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
starknet deploy --contract Compiled/Settings_compiled.json --inputs 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
starknet deploy --contract Compiled/ERC20_base_compiled.json --inputs 55534443 55534443 100000000000000000000000 0 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
starknet deploy --contract Compiled/ERC20_base_compiled.json --inputs 435a54 435a54 100000000000000000000000 0 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
starknet deploy --contract Compiled/ERC20_base_compiled.json --inputs 57455448 57455448 1000000000000000000000 0 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
starknet deploy --contract Compiled/Oracle_compiled.json --inputs 57455448 57455448
starknet deploy --contract Compiled/TrustedAddy_compiled.json \
--inputs 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0 \
    0x001ef10e44bc58b7d048108d1c3a576465e0ecb38cc47a0baecaebc60687967c \
    0 \
    0 \
    0 \
    0 \
    0 \
    0x04d7ebe534e539e4f6ef0409aab27dc8eb964249b4eeb3c5b9ccb17b741351fe \
    0 \
    0x01047551afeb83e8917f5135d6663694c895b73d069a7f1178fdaafa2af6726d \
    0x00fab882affd32569c826ae1df7f00f95013e1da5ded793f5553a62bfbf09cac \
    0 \
    0 \
    0

Last test
[owner] = 0x02e7b3a6df356dfb79f03a529338bf016e0c17ac9119550e372f588a6539f5e0
[lp] = 0x001ef10e44bc58b7d048108d1c3a576465e0ecb38cc47a0baecaebc60687967c
[pp] = 0
[cb] = 0
[ll] = 0
[gt] = 0
[if] = 0
[czcore] = 0x04d7ebe534e539e4f6ef0409aab27dc8eb964249b4eeb3c5b9ccb17b741351fe
[controller] = 0
[setttings] = 0x01047551afeb83e8917f5135d6663694c895b73d069a7f1178fdaafa2af6726d
[usdc] = 0x00fab882affd32569c826ae1df7f00f95013e1da5ded793f5553a62bfbf09cac
[czt] = 0
[weth] = 0
[oracle] = 0
[trusted] = 0x01ec4ac12b227220131aa07126f6b643af96264a9e977c22e381b6042c551ce5

# check transactions / testing
starknet tx_status --hash 0x2f7fb37a7af22cb9cd03f5aefb52a35f098d24bf0f5607bab5ebcb7ef91f2dd
starknet get_transaction --hash 0x2f7fb37a7af22cb9cd03f5aefb52a35f098d24bf0f5607bab5ebcb7ef91f2dd
starknet get_transaction_receipt --hash 0x2f7fb37a7af22cb9cd03f5aefb52a35f098d24bf0f5607bab5ebcb7ef91f2dd

# update contract addy to point to TrustedAddy
starknet invoke \
    --address 0x01653ffc3bfed9630ed5d02651f8c5695cb671d60266b8ecc39ec02066c0e3a5 \
    --abi LiquidityProvider_abi.json \
    --function set_trusted_addy \
    --inputs 0x07283fce2d2efc1720fbc9b85a0235d442abc5d98f6fff5beddabd90ac7d6acc

starknet call \
    --address 0x04103df6bfa6c6f0a6cdc276d7278b20c3c935f48ae2c9720c68e94951a76628 \
    --abi Compiled/LiquidityProvider_abi.json \
    --function value_lp_token \
    --inputs 0

